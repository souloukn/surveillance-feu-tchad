<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Tableau de Bord - Feux de Brousses (Tchad)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Styles CSS -->
    <!-- ASSUREZ-VOUS QUE LE CHEMIN VERS style.css EST CORRECT -->
    <link rel="stylesheet" href="style.css">
    <!-- Style pour simple-datatables (chargÃ© depuis un CDN) -->
    <!-- Assurez-vous d'utiliser la version la plus rÃ©cente si nÃ©cessaire -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css">

    <!-- Optionnel: IcÃ´ne de page (favicon) -->
    <!-- ASSUREZ-VOUS QUE LE CHEMIN VERS favicon.ico EST CORRECT -->
    <!-- <link rel="icon" href="favicon.ico" type="image/x-icon"> -->
</head>
<body>

    <header>
        <div class="header-content">
            <img src="logo.jpg" alt="Logo Nexus Geo-Ã‰lec" class="site-logo">
            
            <div class="header-title-group">
                 <h1>ðŸ”¥ SURVEILLANCE FEUX TCHAD</h1>
                 <p class="header-subtitle" id="dateRange">DonnÃ©es rÃ©centes â€“ NASA FIRMS</p>
            </div>
            
            <div class="auto-refresh-indicator">
                <div>
                    <div id="currentTime" style="font-size: 1rem; font-weight: 900; color: var(--cyber-green);"></div>
                    <div style="margin-top: 0.3rem;">ACTUALISATION: <span id="refresh-countdown">Chargement...</span></div>
                </div>
            </div>
        </div>
    </header>

    <!--
    SECTION PRINCIPALE : CONTIENT TOUS LES Ã‰LÃ‰MENTS DU TABLEAU DE BORD
    Utilise CSS Grid (voir style.css) pour la mise en page en 2 colonnes:
    1. Colonne gauche (#left-sidebar) (largeur fixe, dÃ©filante) pour stats, graphiques, tableau.
    2. Colonne droite (#interactive-map-section) (prend l'espace restant) pour la carte.
    -->
    <main>
        <!--
        CONTENEUR POUR LA COLONNE LATÃ‰RALE GAUCHE (DÃ‰FILANTE)
        Cet Ã©lÃ©ment (#left-sidebar) est positionnÃ© dans la grille par le CSS Grid.
        Il utilise Flexbox en interne pour empiler ses enfants (les sections) verticalement.
        Il gÃ¨re Ã©galement le dÃ©filement si son contenu dÃ©passe la hauteur disponible.
        -->
        <div id="left-sidebar">
            <!-- Panneau des Statistiques/MÃ©triques -->
            <!-- Cette section est un ENFANT de #left-sidebar -->
            <!-- ID #stats-section est utilisÃ© par le script JS (alignÃ© avec le script Python amÃ©liorÃ©) -->
            <section id="stats-section">
                <h2>ðŸ“Š STATISTIQUES EN TEMPS RÃ‰EL</h2>
                <!-- Ce div .section-content est le wrapper pour le contenu collapsible, utilisÃ© par le JS -->
                <div class="section-content">
                    <!-- Les Ã©lÃ©ments de mÃ©trique auront leurs nombres remplis par le script JS -->
                    <!-- Les classes 'metric', 'number', 'label' sont utilisÃ©es par le CSS pour le style et par le JS pour le ciblage -->
                    <!-- Le texte dans <span class="label"> DOIT correspondre EXACTEMENT aux clÃ©s utilisÃ©es dans dashboard_stats['confidence_counts'] par le script Python -->
                    <div class="metric">
                        <span class="number">?</span> <!-- Le nombre rÃ©el sera injectÃ© par JS -->
                        <span class="label">Total DÃ©tections</span> <!-- JS recherche ce texte -->
                    </div>
                    <div class="metric">
                        <span class="number">?</span> <!-- Le nombre rÃ©el sera injectÃ© par JS -->
                        <span class="label">DÃ©tections Haute Confiance</span> <!-- JS recherche ce texte -->
                    </div>
                    <div class="metric">
                        <span class="number">?</span> <!-- Le nombre rÃ©el sera injectÃ© par JS -->
                        <span class="label">DÃ©tections Nominale Confiance</span> <!-- JS recherche ce texte -->
                    </div>
                     <div class="metric">
                        <span class="number">?</span> <!-- Le nombre rÃ©el sera injectÃ© par JS -->
                        <span class="label">DÃ©tections Basse Confiance</span> <!-- JS recherche ce texte -->
                    </div>
                     <div class="metric">
                        <span class="number">?</span> <!-- Le nombre rÃ©el sera injectÃ© par JS -->
                        <span class="label">DÃ©tections Confiance Inconnue</span> <!-- JS recherche ce texte -->
                    </div>
                     <!-- Si vous ajoutez des statistiques pour chaque satellite dans Python (ex: dans dashboard_stats['satellite_counts']), ajoutez aussi des divs.metric ici avec le libellÃ© exact -->
                     <!-- Exemple si vous ajoutez une stat 'MODIS Terra' : -->
                     <!--
                     <div class="metric">
                        <span class="number">?</span>
                        <span class="label">MODIS Terra</span>
                     </div>
                     -->
                 </div> <!-- Fin .section-content -->
            </section>

            <!-- Panneau de Filtres de Date -->
            <!-- Cette section est un ENFANT de #left-sidebar -->
            <!-- ID #filter-section est utilisÃ© par le script JS (alignÃ© avec le script Python amÃ©liorÃ©) -->
            <section id="filter-section">
                <h2>ðŸ“… FILTRES TEMPORELS</h2>
                 <!-- Ce div .section-content est le wrapper pour le contenu collapsible, utilisÃ© par le JS -->
                <div class="section-content">
                    <div class="filter-group">
                        <label for="filter-single-date">Date Unique:</label>
                        <!-- Les IDs d'inputs #filter-single-date, #filter-start-date, #filter-end-date sont utilisÃ©s par le JS -->
                        <input type="date" id="filter-single-date">
                    </div>
                     <div class="filter-group">
                        <label for="filter-start-date">Date DÃ©but:</label>
                        <input type="date" id="filter-start-date">
                    </div>
                    <div class="filter-group">
                        <label for="filter-end-date">Date Fin:</label>
                        <input type="date" id="filter-end-date">
                    </div>
                    <div class="filter-actions">
                         <!-- Les IDs de boutons #apply-filters-btn et #clear-filters-btn sont utilisÃ©s par le JS -->
                        <button id="apply-filters-btn">Appliquer Filtres</button>
                        <button id="clear-filters-btn">Effacer Filtres</button>
                    </div>
                 </div> <!-- Fin .section-content -->
            </section>

             <!-- Section de la Liste de DÃ©tails (Optionnel: si vous voulez la rÃ©intÃ©grer ici) -->
             <!-- Cette section serait aussi un enfant de #left-sidebar si prÃ©sente -->
             <!-- ID #detail-list-panel est utilisÃ© par le script JS (alignÃ© avec le script Python amÃ©liorÃ©) -->
             <!--
            <section id="detail-list-panel">
                 <h2>DÃ©tections RÃ©centes</h2>
                 // Ce div .section-content est le wrapper pour le contenu collapsible, utilisÃ© par le JS
                 <div class="section-content list-content"> // Add .section-content class, list-content for specific list styles
                     <div class="list-item">Chargement de la liste...</div>
                 </div>
             </section>
             -->


            <!-- Section des Graphiques -->
            <!-- Cette section est un ENFANT de #left-sidebar -->
            <!-- ID #charts-section est utilisÃ© par le CSS et le script JS (pour le collapsible) -->
            <section id="charts-section">
                <h2>ðŸ“ˆ ANALYSE GRAPHIQUE</h2>
                <!-- Ce div .section-content est le wrapper pour le contenu collapsible, utilisÃ© par le JS -->
                <div class="section-content">
                    <!-- Le conteneur de graphiques utilise Flexbox (voir CSS) -->
                    <div class="charts-container">
                        <!-- Chaque graphique est une figure -->
                        <!-- ASSUREZ-VOUS QUE LE CHEMIN VERS CHAQUE FICHIER PNG EST CORRECT (ex: src="charts/fires_per_day.png") -->
                        <!-- loading="lazy" est une bonne pratique pour le chargement d'images hors Ã©cran -->
                        <figure class="chart-item">
                            <img src="charts/fires_per_day.png" alt="Graphique: Nombre de dÃ©tections de feux par jour." loading="lazy">
                            <figcaption>DÃ©tections par Jour.</figcaption>
                        </figure>

                        <figure class="chart-item">
                            <img src="charts/confidence_distribution.png" alt="Graphique: Distribution de la confiance des dÃ©tections." loading="lazy">
                            <figcaption>Distribution de la Confiance.</figcaption>
                        </figure>

                         <figure class="chart-item">
                            <img src="charts/fires_per_satellite.png" alt="Graphique: Nombre de dÃ©tections par satellite." loading="lazy">
                            <figcaption>DÃ©tections par Satellite.</figcaption>
                        </figure>

                        <!-- Ajoutez d'autres figures.chart-item ici si vous avez gÃ©nÃ©rÃ© plus de graphiques -->
                    </div>
                 </div> <!-- Fin .section-content -->
            </section>

            <!-- Section du Tableau de DonnÃ©es -->
            <!-- Cette section est un ENFANT de #left-sidebar -->
            <!-- ID #data-table-section (la section) et #fire-table (le tableau) sont CRUCIAUX pour le CSS et le JS (Simple-DataTables) -->
            <section id="data-table-section">
                <h2>ðŸ“Š DONNÃ‰ES TABULAIRES</h2>
                <!-- Ce div .section-content est le wrapper pour le contenu collapsible, utilisÃ© par le JS -->
                <div class="section-content">
                    <!-- Simple-datatables s'initialise sur l'Ã©lÃ©ment <table id="fire-table"> -->
                    <!-- Il ajoute automatiquement les contrÃ´les (recherche, pagination, select de lignes) -->
                    <table id="fire-table">
                        <thead>
                            <tr>
                                <!-- Les en-tÃªtes de colonne DOIVENT correspondre Ã  l'ordre des donnÃ©es fournies par le script Python dans js_records -->
                                <th>Date</th>         <!-- Index 0 dans js_records -->
                                <th>Heure</th>        <!-- Index 1 dans js_records -->
                                <th>Latitude</th>     <!-- Index 2 dans js_records -->
                                <th>Longitude</th>    <!-- Index 3 dans js_records -->
                                <th>LuminositÃ© (K)</th> <!-- Index 4 dans js_records - contient l'HTML de l'emoji -->
                                <th>Confiance</th>    <!-- Index 5 dans js_records (chaÃ®ne) -->
                                <th>Satellite</th>    <!-- Index 6 dans js_records -->
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Contenu initial affichÃ© pendant le chargement du JS -->
                            <tr>
                                <td colspan="7" style="text-align: center;">Chargement des donnÃ©es...</td>
                            </tr>
                            <!-- Le script JS (simple-datatables et fire_data.js) peuplera le tbody ici -->
                        </tbody>
                    </table>
                 </div> <!-- Fin .section-content -->
            </section>

        </div> <!-- Fin de #left-sidebar -->

        <!-- SECTION PRINCIPALE DROITE : Carte Interactive -->
        <!-- Cette section est un Ã©lÃ©ment direct de main (PAS dans #left-sidebar) -->
        <!-- ID #interactive-map-section est utilisÃ© par le CSS Grid pour le positionnement -->
        <section id="interactive-map-section">
            <!-- Le titre H2 pour la carte est gÃ©nÃ©ralement masquÃ© visuellement dans ce type de mise en page (voir CSS) -->
            <!-- <h2>Carte Interactive</h2> -->
            <!-- L'iframe charge la carte HTML gÃ©nÃ©rÃ©e par Folium -->
            <!-- ASSUREZ-VOUS QUE LE CHEMIN VERS firms_tcd_map.html EST CORRECT (ex: src="firms_tcd_map.html") -->
            <!-- 'title' est important pour l'accessibilitÃ© (lecteurs d'Ã©cran) -->
            <!-- L'iframe remplira sa cellule de grille (height: 100% gÃ©rÃ© par CSS) -->
            <iframe src="firms_tcd_map.html" title="Carte interactive des feux de brousse au Tchad basÃ©e sur les donnÃ©es NASA FIRMS">
                Votre navigateur ne supporte pas les iframes, ou la carte n'a pas pu Ãªtre chargÃ©e.
            </iframe>
        </section>

    </main>

    <footer>
        <p>Â© 2025 NEXUS GEO-Ã‰LEC | POWERED BY <a href="https://firms.modaps.eosdis.nasa.gov/" target="_blank" rel="noopener noreferrer">NASA FIRMS</a> | CYBER THREAT INTELLIGENCE</p>
    </footer>

    <!-- Real-Time Clock Script -->
    <script>
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('fr-FR', { 
                hour: '2-digit', 
                minute: '2-digit', 
                second: '2-digit',
                hour12: false 
            });
            const dateString = now.toLocaleDateString('fr-FR', {
                day: '2-digit',
                month: 'short',
                year: 'numeric'
            }).toUpperCase();
            
            document.getElementById('currentTime').textContent = timeString;
        }
        
        updateClock();
        setInterval(updateClock, 1000);
    </script>

    <!-- Scripts JavaScript -->
    <!-- Script pour simple-datatables (Doit Ãªtre chargÃ© AVANT votre script personnalisÃ© qui l'utilise) -->
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" crossorigin="anonymous"></script>
    <!-- Votre script personnalisÃ© (chargÃ© APRÃˆS la bibliothÃ¨que qu'il utilise et juste avant </body>) -->
    <!-- Ce script PEUPLE LE HTML (stats, liste, tableau) et INITIALISE simple-datatables -->
    <!-- ASSUREZ-VOUS QUE LE CHEMIN VERS fire_data.js EST CORRECT (ex: src="fire_data.js") -->
    <script src="fire_data.js"></script>

</body>
</html>