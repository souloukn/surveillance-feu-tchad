<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Tableau de Bord - Feux de Brousses (Tchad)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Styles CSS -->
    <!-- ASSUREZ-VOUS QUE LE CHEMIN VERS style.css EST CORRECT -->
    <link rel="stylesheet" href="style.css">
    <!-- Style pour simple-datatables (charg√© depuis un CDN) -->
    <!-- Assurez-vous d'utiliser la version la plus r√©cente si n√©cessaire -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css">

    <!-- Optionnel: Ic√¥ne de page (favicon) -->
    <!-- ASSUREZ-VOUS QUE LE CHEMIN VERS favicon.ico EST CORRECT -->
    <!-- <link rel="icon" href="favicon.ico" type="image/x-icon"> -->
</head>
<body>

    <header>
        <!-- Conteneur Flexbox pour aligner le logo et le texte du header -->
        <div class="header-content">
            <!-- Le logo -->
            <!-- ASSUREZ-VOUS QUE LE CHEMIN VERS logo.jpg EST CORRECT (ex: src="logo.jpg" si dans le m√™me dossier) -->
            <img src="logo.jpg" alt="Logo Nexus Geo-√âlec" class="site-logo">

            <!-- Le titre et le sous-titre -->
            <div class="header-title-group">
                 <h1>Tableau de Bord : Feux de Brousses Actifs (Tchad)</h1>
                 <!-- Le paragraphe p.header-subtitle est cibl√© par le JS pour ajouter la plage de dates -->
                 <p class="header-subtitle">Donn√©es r√©centes ‚Äì NASA FIRMS</p> <!-- Texte par d√©faut, sera mis √† jour par JS -->
            </div>
        </div>
         <!-- Indicateur d'auto-actualisation -->
         <!-- data-interval sp√©cifie l'intervalle en secondes pour le script JS -->
         <div class="auto-refresh-indicator" data-interval="300"> <!-- Intervalle de 5 minutes par d√©faut -->
             Actualisation dans: <span id="refresh-countdown">Chargement...</span> <!-- Sera mis √† jour par JS -->
         </div>
    </header>

    <!--
    SECTION PRINCIPALE : CONTIENT TOUS LES √âL√âMENTS DU TABLEAU DE BORD
    Utilise CSS Grid (voir style.css) pour la mise en page en 2 colonnes:
    1. Colonne gauche (#left-sidebar) (largeur fixe, d√©filante) pour stats, graphiques, tableau.
    2. Colonne droite (#interactive-map-section) (prend l'espace restant) pour la carte.
    -->
    <main>
        <!--
        CONTENEUR POUR LA COLONNE LAT√âRALE GAUCHE (D√âFILANTE)
        Cet √©l√©ment (#left-sidebar) est positionn√© dans la grille par le CSS Grid.
        Il utilise Flexbox en interne pour empiler ses enfants (les sections) verticalement.
        Il g√®re √©galement le d√©filement si son contenu d√©passe la hauteur disponible.
        -->
        <div id="left-sidebar">
            <!-- Panneau des Statistiques/M√©triques -->
            <!-- Cette section est un ENFANT de #left-sidebar -->
            <!-- ID #stats-section est utilis√© par le script JS (align√© avec le script Python am√©lior√©) -->
            <section id="stats-section">
                <h2>Statistiques Cl√©s</h2>
                <!-- Ce div .section-content est le wrapper pour le contenu collapsible, utilis√© par le JS -->
                <div class="section-content">
                    <!-- Les √©l√©ments de m√©trique auront leurs nombres remplis par le script JS -->
                    <!-- Les classes 'metric', 'number', 'label' sont utilis√©es par le CSS pour le style et par le JS pour le ciblage -->
                    <!-- Le texte dans <span class="label"> DOIT correspondre EXACTEMENT aux cl√©s utilis√©es dans dashboard_stats['confidence_counts'] par le script Python -->
                    <div class="metric">
                        <span class="number">?</span> <!-- Le nombre r√©el sera inject√© par JS -->
                        <span class="label">Total D√©tections</span> <!-- JS recherche ce texte -->
                    </div>
                    <div class="metric">
                        <span class="number">?</span> <!-- Le nombre r√©el sera inject√© par JS -->
                        <span class="label">D√©tections Haute Confiance</span> <!-- JS recherche ce texte -->
                    </div>
                    <div class="metric">
                        <span class="number">?</span> <!-- Le nombre r√©el sera inject√© par JS -->
                        <span class="label">D√©tections Nominale Confiance</span> <!-- JS recherche ce texte -->
                    </div>
                     <div class="metric">
                        <span class="number">?</span> <!-- Le nombre r√©el sera inject√© par JS -->
                        <span class="label">D√©tections Basse Confiance</span> <!-- JS recherche ce texte -->
                    </div>
                     <div class="metric">
                        <span class="number">?</span> <!-- Le nombre r√©el sera inject√© par JS -->
                        <span class="label">D√©tections Confiance Inconnue</span> <!-- JS recherche ce texte -->
                    </div>
                     <!-- Si vous ajoutez des statistiques pour chaque satellite dans Python (ex: dans dashboard_stats['satellite_counts']), ajoutez aussi des divs.metric ici avec le libell√© exact -->
                     <!-- Exemple si vous ajoutez une stat 'MODIS Terra' : -->
                     <!--
                     <div class="metric">
                        <span class="number">?</span>
                        <span class="label">MODIS Terra</span>
                     </div>
                     -->
                 </div> <!-- Fin .section-content -->
            </section>

            <!-- Panneau de Filtres de Date -->
            <!-- Cette section est un ENFANT de #left-sidebar -->
            <!-- ID #filter-section est utilis√© par le script JS (align√© avec le script Python am√©lior√©) -->
            <section id="filter-section">
                <h2>Filtrer par Date</h2>
                 <!-- Ce div .section-content est le wrapper pour le contenu collapsible, utilis√© par le JS -->
                <div class="section-content">
                    <div class="filter-group">
                        <label for="filter-single-date">Date Unique:</label>
                        <!-- Les IDs d'inputs #filter-single-date, #filter-start-date, #filter-end-date sont utilis√©s par le JS -->
                        <input type="date" id="filter-single-date">
                    </div>
                     <div class="filter-group">
                        <label for="filter-start-date">Date D√©but:</label>
                        <input type="date" id="filter-start-date">
                    </div>
                    <div class="filter-group">
                        <label for="filter-end-date">Date Fin:</label>
                        <input type="date" id="filter-end-date">
                    </div>
                    <div class="filter-actions">
                         <!-- Les IDs de boutons #apply-filters-btn et #clear-filters-btn sont utilis√©s par le JS -->
                        <button id="apply-filters-btn">Appliquer Filtres</button>
                        <button id="clear-filters-btn">Effacer Filtres</button>
                    </div>
                 </div> <!-- Fin .section-content -->
            </section>

            <!-- NOUVELLE SECTION: Syst√®me d'Alertes -->
            <section id="alert-section">
                <h2>üîî Alertes en Temps R√©el</h2>
                <div class="section-content">
                    <div class="alert-controls">
                        <label class="alert-toggle">
                            <input type="checkbox" id="alert-sound-toggle" checked>
                            <span>Activer le son des alertes</span>
                        </label>
                        <div class="alert-threshold">
                            <label for="alert-threshold-input">Seuil de confiance:</label>
                            <input type="number" id="alert-threshold-input" value="80" min="0" max="100">
                        </div>
                    </div>
                    <div id="alert-status" class="alert-status">Surveillance active...</div>
                </div>
            </section>

            <!-- NOUVELLE SECTION: Donn√©es M√©t√©o -->
            <section id="weather-section">
                <h2>üå§Ô∏è Conditions M√©t√©orologiques</h2>
                <div class="section-content">
                    <p class="weather-loading">Chargement des donn√©es m√©t√©o...</p>
                </div>
            </section>

            <!-- NOUVELLE SECTION: Analyse Pr√©dictive -->
            <section id="prediction-section">
                <h2>üìä Zones √† Risque √âlev√©</h2>
                <div class="section-content">
                    <p class="prediction-loading">Analyse en cours...</p>
                </div>
            </section>

            <!-- NOUVELLE SECTION: Comparaison Historique -->
            <section id="historical-section">
                <h2>üìà Tendances Historiques</h2>
                <div class="section-content">
                    <p class="historical-loading">Chargement des donn√©es historiques...</p>
                    <button id="clear-history-btn" class="history-btn">Effacer l'historique</button>
                </div>
            </section>

            <!-- NOUVELLE SECTION: Zones d'Int√©r√™t -->
            <section id="zones-section">
                <h2>üìç Zones d'Int√©r√™t Personnalis√©es</h2>
                <div class="section-content">
                    <p class="zones-loading">Chargement des zones...</p>
                </div>
            </section>

             <!-- Section de la Liste de D√©tails (Optionnel: si vous voulez la r√©int√©grer ici) -->
             <!-- Cette section serait aussi un enfant de #left-sidebar si pr√©sente -->
             <!-- ID #detail-list-panel est utilis√© par le script JS (align√© avec le script Python am√©lior√©) -->
             <!--
            <section id="detail-list-panel">
                 <h2>D√©tections R√©centes</h2>
                 // Ce div .section-content est le wrapper pour le contenu collapsible, utilis√© par le JS
                 <div class="section-content list-content"> // Add .section-content class, list-content for specific list styles
                     <div class="list-item">Chargement de la liste...</div>
                 </div>
             </section>
             -->


            <!-- Section des Graphiques -->
            <!-- Cette section est un ENFANT de #left-sidebar -->
            <!-- ID #charts-section est utilis√© par le CSS et le script JS (pour le collapsible) -->
            <section id="charts-section">
                <h2>Graphiques des D√©tections</h2>
                <!-- Ce div .section-content est le wrapper pour le contenu collapsible, utilis√© par le JS -->
                <div class="section-content">
                    <!-- Le conteneur de graphiques utilise Flexbox (voir CSS) -->
                    <div class="charts-container">
                        <!-- Chaque graphique est une figure -->
                        <!-- ASSUREZ-VOUS QUE LE CHEMIN VERS CHAQUE FICHIER PNG EST CORRECT (ex: src="charts/fires_per_day.png") -->
                        <!-- loading="lazy" est une bonne pratique pour le chargement d'images hors √©cran -->
                        <figure class="chart-item">
                            <img src="charts/fires_per_day.png" alt="Graphique: Nombre de d√©tections de feux par jour." loading="lazy">
                            <figcaption>D√©tections par Jour.</figcaption>
                        </figure>

                        <figure class="chart-item">
                            <img src="charts/confidence_distribution.png" alt="Graphique: Distribution de la confiance des d√©tections." loading="lazy">
                            <figcaption>Distribution de la Confiance.</figcaption>
                        </figure>

                         <figure class="chart-item">
                            <img src="charts/fires_per_satellite.png" alt="Graphique: Nombre de d√©tections par satellite." loading="lazy">
                            <figcaption>D√©tections par Satellite.</figcaption>
                        </figure>

                        <!-- Ajoutez d'autres figures.chart-item ici si vous avez g√©n√©r√© plus de graphiques -->
                    </div>
                 </div> <!-- Fin .section-content -->
            </section>

            <!-- Section du Tableau de Donn√©es -->
            <!-- Cette section est un ENFANT de #left-sidebar -->
            <!-- ID #data-table-section (la section) et #fire-table (le tableau) sont CRUCIAUX pour le CSS et le JS (Simple-DataTables) -->
            <section id="data-table-section">
                <h2>Donn√©es Tabulaires</h2>
                <!-- Ce div .section-content est le wrapper pour le contenu collapsible, utilis√© par le JS -->
                <div class="section-content">
                    <!-- Simple-datatables s'initialise sur l'√©l√©ment <table id="fire-table"> -->
                    <!-- Il ajoute automatiquement les contr√¥les (recherche, pagination, select de lignes) -->
                    <table id="fire-table">
                        <thead>
                            <tr>
                                <!-- Les en-t√™tes de colonne DOIVENT correspondre √† l'ordre des donn√©es fournies par le script Python dans js_records -->
                                <th>Date</th>         <!-- Index 0 dans js_records -->
                                <th>Heure</th>        <!-- Index 1 dans js_records -->
                                <th>Latitude</th>     <!-- Index 2 dans js_records -->
                                <th>Longitude</th>    <!-- Index 3 dans js_records -->
                                <th>Luminosit√© (K)</th> <!-- Index 4 dans js_records - contient l'HTML de l'emoji -->
                                <th>Confiance</th>    <!-- Index 5 dans js_records (cha√Æne) -->
                                <th>Satellite</th>    <!-- Index 6 dans js_records -->
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Contenu initial affich√© pendant le chargement du JS -->
                            <tr>
                                <td colspan="7" style="text-align: center;">Chargement des donn√©es...</td>
                            </tr>
                            <!-- Le script JS (simple-datatables et fire_data.js) peuplera le tbody ici -->
                        </tbody>
                    </table>
                 </div> <!-- Fin .section-content -->
            </section>

        </div> <!-- Fin de #left-sidebar -->

        <!-- SECTION PRINCIPALE DROITE : Carte Interactive -->
        <!-- Cette section est un √©l√©ment direct de main (PAS dans #left-sidebar) -->
        <!-- ID #interactive-map-section est utilis√© par le CSS Grid pour le positionnement -->
        <section id="interactive-map-section">
            <!-- Le titre H2 pour la carte est g√©n√©ralement masqu√© visuellement dans ce type de mise en page (voir CSS) -->
            <!-- <h2>Carte Interactive</h2> -->
            
            <!-- L√©gende de la carte -->
            <div class="map-legend">
                <h4>üó∫Ô∏è L√©gende de la Carte</h4>
                <div class="legend-item">
                    <span class="legend-icon" style="background: red;"></span>
                    <span>Intensit√© TR√àS √âLEV√âE (Luminosit√© > 380K ou Confiance > 90%)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon" style="background: #FF6600;"></span>
                    <span>Intensit√© √âLEV√âE (Luminosit√© > 340K ou Confiance > 70%)</span>
                </div>
                <div class="legend-item">
                    <span class="legend-icon" style="background: #FFAA00;"></span>
                    <span>Intensit√© MOD√âR√âE (Luminosit√© < 340K)</span>
                </div>
                <div class="legend-divider"></div>
                <div class="legend-note">
                    <strong>üî• Polygones:</strong> Zones regroupant plusieurs d√©tections de feu<br>
                    <strong>üìç Points:</strong> D√©tections individuelles de feu
                </div>
            </div>
            
            <!-- L'iframe charge la carte HTML g√©n√©r√©e par Folium -->
            <!-- ASSUREZ-VOUS QUE LE CHEMIN VERS firms_tcd_map.html EST CORRECT (ex: src="firms_tcd_map.html") -->
            <!-- 'title' est important pour l'accessibilit√© (lecteurs d'√©cran) -->
            <!-- L'iframe remplira sa cellule de grille (height: 100% g√©r√© par CSS) -->
            <iframe src="firms_tcd_map.html" title="Carte interactive des feux de brousse au Tchad bas√©e sur les donn√©es NASA FIRMS">
                Votre navigateur ne supporte pas les iframes, ou la carte n'a pas pu √™tre charg√©e.
            </iframe>
        </section>

    </main>

    <footer>
        <p>¬© 2025 Nexus Geo-√âlec | Donn√©es : <a href="https://firms.modaps.eosdis.nasa.gov/" target="_blank" rel="noopener noreferrer">NASA FIRMS</a></p>
         <!-- Optionnel: Informations l√©gales, version, etc. -->
    </footer>

    <!-- Scripts JavaScript -->
    <!-- Script pour simple-datatables (Doit √™tre charg√© AVANT votre script personnalis√© qui l'utilise) -->
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" crossorigin="anonymous"></script>
    <!-- Votre script personnalis√© (charg√© APR√àS la biblioth√®que qu'il utilise et juste avant </body>) -->
    <!-- Ce script PEUPLE LE HTML (stats, liste, tableau) et INITIALISE simple-datatables -->
    <!-- ASSUREZ-VOUS QUE LE CHEMIN VERS fire_data.js EST CORRECT (ex: src="fire_data.js") -->
    <script src="fire_data.js"></script>

</body>
</html>